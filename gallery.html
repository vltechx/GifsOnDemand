<html>
<head>
<style>
div.gallery {
  margin: 50px;
  border: 1px solid #ccc;
  float: left;
  width: 180px;
}

div.gallery:hover {
  border: 1px solid #777;
}

div.gallery img {
  width: 100%;
  height: auto;
}

div.desc {
  padding: 15px;
  text-align: center;
}
</style>
</head>
<body>

    <h1>Welcome to GIFs on demand</h1>

    <form name="gallery" id="gallery" method="post" action="" id="FORM_ID">
        <p>
            Please select a subject to load related GIFS at specified refresh rate.
            <br><br>
            <label for="things">Subject</label>
            <select name="things" id="things" onchange="ThingItemUpdate(this.value)">
                <option value="cat">Cats</option>
                <option value="dog">Dogs</option>
                <option value="food">Food</option>
                <option value="flower">Flowers</option>
            </select>
    </p>
    <label for="refresh_rate">Refresh rate</label>
    <input name="refresh_rate" id="refresh_rate" placeholder=2 onchange="updateRefreshRate(this.value)">
    </form>
    
    <script type="text/javascript">

    var things = ["cat", "dog", "food", "flower"];
    var refresh_rate = 2;    

    Refresh();

    function updateRefreshRate(rate) 
    {
        if(rate <= 0)
            rate = 2;        
        refresh_rate = rate;
        console.log("Refresh rate is updated to " + refresh_rate);
    }

    function Refresh()
    {
        var selThing = document.getElementById('things').value;
        console.log("OnRefresh " + selThing + " rate is " + refresh_rate);
        setTimeout(Refresh, refresh_rate * 1000);
        changeImage(selThing);
    }

    function ThingItemUpdate(thing)
    {
        selThing = thing;
        console.log("On change thing " + selThing);
        changeImage(selThing);
    }

    function shuffle(o)
    {
        for(var j, x, i = o.length; i; j = parseInt(Math.random() * i), x = o[--i], o[i] = o[j], o[j] = x);
        return o;
    }

    function changeImage(selTopic)
    {
        //generate random unique numbers in the range of 1 to number of images(8)
        var numbers = [];
        for(var l=1; l<=8; l++)
            numbers[l-1] = l;
        var randomNumber = shuffle(numbers);

        for(var l=0; l<4; l++)
        {
            var eImage = document.getElementById("image"+(l+1));
            if(eImage)
            {
                var img = "images/" + selTopic + "-image-" + randomNumber[l] + ".gif";
                eImage.setAttribute("src", img);
            }
        }
    }
    </script>

    <br><br>

    <div class="gallery">
        <img id="image1" src="images/cat-image-1.gif" border="1" alt="cat-image-1.gif" width="600" height="400">
    </div>
    <div class="gallery">
        <img id="image2" src="images/cat-image-2.gif" border="1" alt="cat-image-2.gif"width="600" height="400">
    </div>
    <div class="gallery">
        <img id="image3" src="images/cat-image-3.gif" border="1" alt="cat-image-3.gif"width="600" height="400">
    </div>
    <div class="gallery">
        <img id="image4" src="images/cat-image-4.gif" border="1" alt="cat-image-4.gif"width="600" height="400">
    </div>    
</body>
</html>
